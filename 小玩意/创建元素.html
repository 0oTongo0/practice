<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<style type="text/css">
		*{
			margin: 0;
			padding: 0;
		}
		.d1{
			width: 200px;
			height: 200px;
			border: 1px solid red;
		}
		.br{
			width: 400px;
			height: 400px;
			border: 1px solid aqua;
			margin: 10px;
			padding: 10px;
			overflow: hidden;
			position: relative;
			box-sizing: border-box;
		}
		.ov{
			width: 40px;
			height: 40px;
			background: #666666;
			position: absolute;
			cursor: pointer;
			top: 10px;
			left: 10px;
			/* margin-top: 10px; */
			border: 1px solid red;
			padding: 10px;
		}
	</style>
	<body>
		<input type="checkbox" class="par"/>
		<div class="box">
			<input type="checkbox" />
			<input type="checkbox" />
			<input type="checkbox" />
			<input type="checkbox" />
		</div>
		<input type="button" value="点我添加" class="btn"/>
		<div class="d1">
			
		</div>
		<div class="br">
			<div class="ov">
				
			</div>
		</div>
	</body>
	<script type="text/javascript">
		//全选
		var par = document.getElementsByClassName("par")[0];
		var box = document.getElementsByClassName("box")[0];
		var inps = box.getElementsByTagName("input");
		par.onclick = function(){
			for(var i=0; i<inps.length; i++){
				inps[i].checked = this.checked
			}
		}
		for(var i=0; i<inps.length; i++){
			inps[i].onclick = function(){
				var flag = true;
				for(var i=0; i<inps.length; i++){
					console.log(inps[i])
					if(!inps[i].checked == true){
						flag = false;
					}
					par.checked = flag;
				}
			}
		}
		
		// 新增元素
		var btn = document.getElementsByClassName("btn")[0];
		var d1 = document.getElementsByClassName("d1")[0];
		var arr = ["大佬","怎么说","还能怎么说","牛逼啊"];
		btn.onclick = function(){
			var uu = document.createElement("ul");
			d1.appendChild(uu);
			for(var i=0; i<arr.length; i++){
				var ii = document.createElement('li');
				uu.appendChild(ii);
				ii.innerHTML = arr[i]
				ii.onclick = function(){
					console.log(this.innerHTML);
				}
				console.log(ii)
			}
		}
		
		var a = {n:1};
		var b = a;
		a.x = a = {n:2};
		console.log(a.x);
		console.log(b.x);
		
		
		//移动
		var br = document.getElementsByClassName("br")[0];
		var ov = document.getElementsByClassName("ov")[0];
		// 获取  左边框 clientLeft  
		// 获取  上边框 clientTop
		// 获取   宽  clientWidth (center+padding) clientWidth  // 当设置border-size  减去pading 和边框
		// 获取   高  clientHeight  // 同上
		// 获取   宽  offsetWidth (center+padding+border)  //当设置border-size 减去border
		// 获取   高  offsetHeight (center+padding+border)  //当设置border-size 减去border
		// 获取   距离父元素TOP距离 offsetTop
		// 获取   距离父元素left距离 offsetLeft
		br.onmouseover = function(){
			ov.style.display = 'block'
		}
		br.onmouseout = function(){
			ov.style.display = 'none'
		}
		br.onmousemove = function(e){
			// console.log(e)
			
			var t = e.clientY - br.offsetTop - ov.offsetHeight/2;
			var l = e.clientX - br.offsetLeft - ov.offsetWidth/2;
			console.log(t +"================="+ l);
			console.log((br.offsetHeight - ov.offsetHeight),"0.0")
			if(l <= 0){
				l = 0
			}else if(l >= br.offsetWidth - ov.offsetWidth){
				l = br.offsetWidth - ov.offsetWidth -2
			}
			if(t <= 0){
				t = 0;
			}else if(t >= br.offsetHeight - ov.offsetHeight){
				t = br.offsetHeight - ov.offsetHeight -2 
			}
			ov.style.left = l + "px";
			ov.style.top = t + "px";
		}
		for( var i = 0; i < 5; i++) {
			setTimeout(() => {
				console.log(i)
			  }, i);
		}
		
	</script>
</html>
